{
  "info": {
    "_postman_id": "da6377bf-5e6b-4604-add7-aaed133a434b",
    "name": "Product Management API - CRUD",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_exporter_id": "38437265",
    "_collection_link": "https://go.postman.co/collection/38437265-da6377bf-5e6b-4604-add7-aaed133a434b?source=collection_link"
  },
  "item": [
    {
      "name": "01 - Create (POST)",
      "item": [
        {
          "name": "Cadastrar Usuário",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// Usando variáveis dinâmicas nativas do Postman para garantir 100% de estabilidade\r",
                  "const randomName = pm.variables.replaceIn('{{$randomFullName}}');\r",
                  "const randomEmail = pm.variables.replaceIn('{{$randomEmail}}');\r",
                  "const randomPassword = pm.variables.replaceIn('{{$randomPassword}}');\r",
                  "\r",
                  "pm.collectionVariables.set(\"userName\", randomName);\r",
                  "pm.collectionVariables.set(\"userEmail\", randomEmail);\r",
                  "pm.collectionVariables.set(\"userPassword\", randomPassword);"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// 1. Validar se o Status Code é 201 (Created)\r",
                  "pm.test(\"Status code é 201\", function () {\r",
                  "    pm.response.to.have.status(201);\r",
                  "});\r",
                  "\r",
                  "// 2. Validar se a mensagem de sucesso está correta\r",
                  "pm.test(\"Mensagem de sucesso é exibida\", function () {\r",
                  "    var jsonData = pm.response.json();\r",
                  "    pm.expect(jsonData.message).to.eql(\"Cadastro realizado com sucesso\");\r",
                  "});\r",
                  "\r",
                  "// 3. Capturar o ID do usuário criado para usar nas próximas requisições\r",
                  "\r",
                  "var jsonData = pm.response.json();\r",
                  "pm.collectionVariables.set(\"userID\", jsonData._id);"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\r\n  \"nome\": \"{{userName}}\",\r\n  \"email\": \"{{userEmail}}\",\r\n  \"password\": \"{{userPassword}}\",\r\n  \"administrador\": \"true\"\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/usuarios",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "usuarios"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Cadastrar Usuário - E-mail Já Utilizado",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code é 400 (Bad Request)\", function () {\r",
                  "    pm.response.to.have.status(400);\r",
                  "});\r",
                  "\r",
                  "pm.test(\"Mensagem de erro: Este email já está sendo usado\", function () {\r",
                  "    var jsonData = pm.response.json();\r",
                  "    pm.expect(jsonData.message).to.eql(\"Este email já está sendo usado\");\r",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\r\n  \"nome\": \"Teste Duplicado\",\r\n  \"email\": \"{{userEmail}}\",\r\n  \"password\": \"teste123\",\r\n  \"administrador\": \"true\"\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/usuarios",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "usuarios"
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "02 - Read (GET)",
      "item": [
        {
          "name": "Buscar Usuário por ID",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// 1. Validar se o status é 200 OK\r",
                  "pm.test(\"Status code é 200\", function () {\r",
                  "    pm.response.to.have.status(200);\r",
                  "});\r",
                  "\r",
                  "//2. Validar se o ID retornado é o mesmo que pedimos\r",
                  "pm.test(\"ID retornado está correto\", function () {\r",
                  "    var jsonData = pm.response.json();\r",
                  "    pm.expect(jsonData._id).to.eql(pm.collectionVariables.get(\"userID\"));\r",
                  "});\r",
                  "\r",
                  "// 3. Validar se o nome bate com o que o Faker gerou no POST\r",
                  "pm.test(\"O nome do usuário está correto\", function () {\r",
                  "    var jsonData = pm.response.json();\r",
                  "    pm.expect(jsonData.nome).to.eql(pm.collectionVariables.get(\"userName\"));\r",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/usuarios/{{userID}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "usuarios",
                "{{userID}}"
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "03 - Update (PUT/PATCH)",
      "item": [
        {
          "name": "Alterar Usuário",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "const newRandomName = pm.variables.replaceIn('{{$randomFullName}}');\r",
                  "pm.collectionVariables.set(\"newUserName\", newRandomName);"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "test",
              "script": {
                "exec": [
                  "//1. Validar Status code\r",
                  "pm.test(\"Status code 200 OK\", function (){\r",
                  "    pm.response.to.have.status(200);\r",
                  "});\r",
                  "//2. Validar se o registro foi alterado\r",
                  "pm.test(\"Mensagem de alteração correta\", function () {\r",
                  "    var jsonData = pm.response.json();\r",
                  "    pm.expect(jsonData.message).to.eql(\"Registro alterado com sucesso\");\r",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\r\n  \"nome\": \"{{newUserName}}\",\r\n  \"email\": \"{{userEmail}}\",\r\n  \"password\": \"{{userPassword}}\",\r\n  \"administrador\": \"true\"\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/usuarios/{{userID}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "usuarios",
                "{{userID}}"
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "04 - Delete (DELETE)",
      "item": [
        {
          "name": "Excluir Usuário",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code é 200\", function () {\r",
                  "    pm.response.to.have.status(200);\r",
                  "});\r",
                  "\r",
                  "pm.test(\"Mensagem de exclusão correta\", function () {\r",
                  "    var jsonData = pm.response.json();\r",
                  "    pm.expect(jsonData.message).to.eql(\"Registro excluído com sucesso\");\r",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/usuarios/{{userID}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "usuarios",
                "{{userID}}"
              ]
            }
          },
          "response": []
        }
      ]
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "packages": {},
        "requests": {},
        "exec": [
          ""
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "packages": {},
        "requests": {},
        "exec": [
          ""
        ]
      }
    }
  ],
  "variable": [
    {
      "key": "baseUrl",
<<<<<<< HEAD
      "value": "https://serverest.dev"
    },
    {
      "key": "userName",
      "value": "Joanne Wyman"
    },
    {
      "key": "userEmail",
      "value": "Oliver.MacGyver60@hotmail.com"
    },
    {
      "key": "userPassword",
      "value": "Pbsvx6P9YlQIL_n"
    },
    {
      "key": "userID",
      "value": "ppdqC4jz16YbPh4B"
    },
    {
      "key": "newUserName",
      "value": "Kristin Purdy"
=======
      "value": ""
    },
    {
      "key": "userName",
      "value": ""
    },
    {
      "key": "userEmail",
      "value": ""
    },
    {
      "key": "userPassword",
      "value": ""
    },
    {
      "key": "userID",
      "value": ""
    },
    {
      "key": "newUserName",
      "value": ""
>>>>>>> 3fc98883d3ffaa4ffe506a7b0d49c05eee4dbab9
    }
  ]
}